{{ template "widget-base.html" . }}

{{ define "widget-content-classes" }}widget-content-frameless radyjko-widget-container{{ end }}

{{ define "widget-content" }}
<div class="radyjko-player">
    <!-- Gradient background -->
    <div class="radyjko-gradient-bg"></div>
    
    <!-- Player header with current station -->
    <div class="radyjko-header">
        <div class="radyjko-current-station">
            <div class="radyjko-station-icon" id="radyjkoCurrentIcon">
                {{ if gt (len .Stations) 0 }}
                <img id="radyjkoStationImg" src="{{ (index .Stations 0).IconURL }}" alt="Station icon" onerror="this.style.display='none'" style="width: 100%; height: 100%; object-fit: cover; border-radius: 8px;">
                {{ end }}
            </div>
            <div class="radyjko-station-info">
                <div class="radyjko-station-label">Teraz odtwarzam</div>
                <div class="radyjko-station-name" id="radyjkoCurrentName">{{ if gt (len .Stations) 0 }}{{ (index .Stations 0).Name }}{{ else }}Brak stacji{{ end }}</div>
            </div>
        </div>
    </div>

    <!-- Player controls -->
    <div class="radyjko-controls">
        <button class="radyjko-btn radyjko-btn-prev" id="radyjkoPrevBtn" title="Poprzednia stacja">
            <svg xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 24 24">
                <path d="M6 6h2v12H6V6zm3.5 6l8.5 6V6l-8.5 6z"/>
            </svg>
        </button>

        <button class="radyjko-btn radyjko-btn-play" id="radyjkoPlayPauseBtn" title="Odtwórz/Zatrzymaj">
            <svg xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 24 24">
                <path d="M8 5v14l11-7z"/>
            </svg>
        </button>

        <button class="radyjko-btn radyjko-btn-next" id="radyjkoNextBtn" title="Następna stacja">
            <svg xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 24 24">
                <path d="M16 18h2V6h-2zm-11-7l8.5-6v12l-8.5-6z"/>
            </svg>
        </button>

        <div class="radyjko-volume-control">
            <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor">
                <path stroke-linecap="round" stroke-linejoin="round" d="M14.828 14.828a4 4 0 01-5.656 0M9 10h.01M15 10h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z" />
            </svg>
            <input type="range" id="radyjkoVolume" class="radyjko-volume-slider" min="0" max="100" value="70" title="Głośność">
        </div>

        <button class="radyjko-btn radyjko-btn-stations" id="radyjkoStationsBtn" title="Lista stacji" data-popover-type="html" data-popover-position="below">
            <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor">
                <path stroke-linecap="round" stroke-linejoin="round" d="M4 6h16M4 12h16M4 18h16" />
            </svg>
        </button>
    </div>

    <!-- Popover with stations list -->
    <div data-popover-html style="display: none;">
        <div class="radyjko-stations-popover">
            <h3 class="radyjko-stations-title">Stacje radiowe</h3>
            <div class="radyjko-stations-scroll">
                {{ range $index, $station := .Stations }}
                <div class="radyjko-station-item" data-station-index="{{ $index }}" data-station-url="{{ $station.URL }}" data-station-name="{{ $station.Name }}" data-station-icon="{{ $station.IconURL }}">
                    <img class="radyjko-station-item-icon" src="{{ $station.IconURL }}" alt="{{ $station.Name }}">
                    <div class="radyjko-station-item-info">
                        <div class="radyjko-station-item-name">{{ $station.Name }}</div>
                    </div>
                </div>
                {{ else }}
                <div class="radyjko-no-stations">
                    <p>Brak dostępnych stacji</p>
                </div>
                {{ end }}
            </div>
        </div>
    </div>

    <!-- Audio element -->
    <audio id="radyjkoAudioPlayer" style="display: none;"></audio>
</div>
{{ end }}
