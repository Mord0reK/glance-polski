{{ template "widget-base.html" . }}

{{ define "widget-content-classes" }}widget-content-frameless radyjko-widget-container{{ end }}

{{ define "widget-content" }}
<div class="radyjko-player">
    <!-- Animated gradient background -->
    <div class="radyjko-gradient-bg"></div>
    <div class="radyjko-gradient-overlay"></div>
    
    <!-- Main album art section -->
    <div class="radyjko-album-section">
        <div class="radyjko-album-art" id="radyjkoCurrentIcon">
            {{ if gt (len .Stations) 0 }}
            <img id="radyjkoStationImg" src="{{ (index .Stations 0).IconURL }}" alt="Station icon" onerror="this.style.display='none'">
            {{ end }}
        </div>
    </div>

    <!-- Now playing info -->
    <div class="radyjko-now-playing">
        <div class="radyjko-station-label">Teraz odtwarzam</div>
        <div class="radyjko-station-name" id="radyjkoCurrentName">
            {{ if gt (len .Stations) 0 }}{{ (index .Stations 0).Name }}{{ else }}Brak stacji{{ end }}
        </div>
    </div>

    <!-- Player controls -->
    <div class="radyjko-controls">
        <button class="radyjko-btn radyjko-btn-prev" id="radyjkoPrevBtn" title="Poprzednia stacja">
            <svg xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 24 24">
                <path d="M6 6h2v12H6V6zm3.5 6l8.5 6V6l-8.5 6z"/>
            </svg>
        </button>

        <button class="radyjko-btn radyjko-btn-play radyjko-btn-play-main" id="radyjkoPlayPauseBtn" title="Odtwórz/Zatrzymaj">
            <svg xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 24 24">
                <path d="M8 5v14l11-7z"/>
            </svg>
        </button>

        <button class="radyjko-btn radyjko-btn-next" id="radyjkoNextBtn" title="Następna stacja">
            <svg xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 24 24">
                <path d="M16 6h2v12h-2V6zm-2 6l-8.5 6V6l8.5 6z"/>
            </svg>
        </button>
    </div>

    <!-- Volume control -->
    <div class="radyjko-footer-controls">
        <div class="radyjko-volume-control">
            <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor">
                <path stroke-linecap="round" stroke-linejoin="round" d="M19.114 5.636a9 9 0 010 12.728M16.463 8.288a5.25 5.25 0 010 7.424M6.75 8.25l4.72-4.72a.75.75 0 011.28.53v15.88a.75.75 0 01-1.28.53l-4.72-4.72H4.51c-.88 0-1.704-.507-1.938-1.354A9.01 9.01 0 012.25 12c0-.83.112-1.633.322-2.396C2.806 8.756 3.63 8.25 4.51 8.25H6.75z" />
            </svg>
            <input type="range" id="radyjkoVolume" class="radyjko-volume-slider" min="0" max="100" value="70" title="Głośność">
        </div>
    </div>

    <!-- Hidden stations data for JavaScript -->
    <div id="radyjkoStationsData" style="display: none;">
        {{ range $index, $station := .Stations }}
        <div class="radyjko-station-item" data-index="{{ $index }}" data-url="{{ $station.URL }}" data-name="{{ $station.Name }}" data-icon="{{ $station.IconURL }}" data-shortname="{{ $station.ShortName }}"></div>
        {{ end }}
    </div>

    <!-- Audio element -->
    <audio id="radyjkoAudioPlayer" crossorigin="anonymous"></audio>
</div>
{{ end }}
